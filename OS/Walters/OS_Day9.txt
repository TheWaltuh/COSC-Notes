
=========OS DAY 9==========

**Try to make medical appt for tuesday or wednesday.

Linux Auditing and Logging

Daemon  -- orphan process that runs in background under init.

http://10.50.21.56:8000/

PROS:
Remote Logging
	-easy access
	-harder to tamper with logs.
Historical analysis
    -recording past events
    
CONS:
    -Logs can be crypic
    -logging is not free
    -you can get too much or too little. 
    -Times between devices must be consistent. 


config file:
    /etc/rsyslog.conf
        -log entries follow syslog standard <facility.severity>
            -facility: what program, or system the log is from
                0 = kernel messages
                1 = user-level messages
                2 = mail system
                3 = system daemons
                4 = security/authorization messages
                5 = messages made by syslogd
                6 = line printer subsystem
                7 = network news subsystem
            -severity: level of urgency of the log
                -0 = panic
                -1 = alert
                -2 = critical
                -3 = error
                -4 = warning
                -5 = notice
                -6 = informational
                -7 = debug info
        
        -format of /etc/rsyslog.conf {
        
        <facility>.<severity>           <log file>
        }    
        
        - having an @@<IP ADDRESS> means the logs are remote.
        
        -mail.info matches all messages produced by the kernel with severity of #equal to and greater than (greater severity) 6/Informational (severity 0 - 6).
        -mail.!info matches all messages produced by the kernel with severity of #less than and not including (lesser severity) 6/Informational (severity 7).
            ! is not inclusive

LOG LOCATION:

Most logs are located in /var/log.
service logs are in /usr/sbin/rsyslogd.

/var/run/utmp  -- shows currently logged in users
/var/log/wtmp  -- shows histroy for /var/run/utmp
** not ascii, must use last command.

last -f /var/run/utmp:
(Shows currently logged in users)




LOG TYPES 2:

Application
Any logs having to do with programs.
Apache - Webserver (dir) . 
apt - Package Manager (dir) 
/var/log/mysql.log



System  
/var/log/messages  -- legacy catch all
/var/log/syslog  -- ubuntu/debian catch all

dmesg  -- device messenger, queries /proc/kmsg
    **first logs generated by system.


Log Rotate:
regular clearing of logs so they don't accumulate infinitely. Usually daily. 
config file: /etc/logrotate.d


vim & zcat help you look at ziped logs.


journalctl -e  -- systemd command to check most recently recieved logs

journalctl --list-boots  -- find specific logs. 
journalctl -b <a boot listd from previous command>  -- see all logs for specific boot.

journalctl -u ssh.service --since "2 days ago"




LOG FORMATS:

ascii  -- can be easily cated out.











































